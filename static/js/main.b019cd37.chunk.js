(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(22)},16:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(16),n(1)),u=n(2),s=n(4),b=n(3),f=n(5),l=n(6),d=n.n(l),m=n(9),p={name:"infared",uuid:"f000aa00-0451-4000-b000-000000000000",data:"f000aa01-0451-4000-b000-000000000000",notification:"00002902-0000-1000-8000-00805f9b34fb",configuration:"f000aa02-0451-4000-b000-000000000000",period:"f000aa03-0451-4000-b000-000000000000"},v={name:"humidity",uuid:"f000aa20-0451-4000-b000-000000000000",data:"f000aa21-0451-4000-b000-000000000000",notification:"00002902-0000-1000-8000-00805f9b34fb",configuration:"f000aa22-0451-4000-b000-000000000000",period:"f000aa23-0451-4000-b000-000000000000"},g={name:"barometer",uuid:"f000aa40-0451-4000-b000-000000000000",data:"f000aa41-0451-4000-b000-000000000000",notification:"00002902-0000-1000-8000-00805f9b34fb",configuration:"f000aa42-0451-4000-b000-000000000000",period:"f000aa44-0451-4000-b000-000000000000"},h={name:"optical",uuid:"f000aa70-0451-4000-b000-000000000000",data:"f000aa71-0451-4000-b000-000000000000",notification:"00002902-0000-1000-8000-00805f9b34fb",configuration:"f000aa72-0451-4000-b000-000000000000",period:"f000aa73-0451-4000-b000-000000000000"},T={name:"movement",uuid:"f000aa80-0451-4000-b000-000000000000",data:"f000aa81-0451-4000-b000-000000000000",notification:"00002902-0000-1000-8000-00805f9b34fb",configuration:"f000aa82-0451-4000-b000-000000000000",period:"f000aa83-0451-4000-b000-000000000000"},y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={connected:!1,server:null},n.enableService=function(e){return n.server.getPrimaryService(e.uuid).then(function(t){return t.getCharacteristic(e.configuration)}).then(function(t){return"movement"!==e.name?t.writeValue(Uint8Array.of(1)):t.writeValue(Uint16Array.of(127))}).then(function(){return console.log("enabled ".concat(e.name))})},n.readCharacteristic=function(e,t){return n.server.getPrimaryService(e.uuid).then(function(n){return n.getCharacteristic(e[t])}).then(function(e){return e.startNotifications()})},n.subscribeTo=function(e,t,a){return n.readCharacteristic(e,t).then(function(e){e.addEventListener("characteristicvaluechanged",function(e){var t=e.target.value;a(t)})})},n.subscribeToBarometerData=function(e){return n.subscribeTo(g,"data",function(t){return e({temp:(16777215&t.getUint32(0,!0))/100,pressure:(t.getUint32(2,!0)>>8&16777215)/100})})},n.subscribeToHumidityData=function(e){return n.subscribeTo(v,"data",function(t){return e({temp:t.getUint16(0,!0)/65536*165-40,humidity:(-4&t.getUint16(2,!0))/65536*100})})},n.subscribeToInfaredData=function(e){return n.subscribeTo(p,"data",function(t){return e({objectTemp:.03125*(t.getUint16(0,!0)>>2),ambientTemp:.03125*(t.getUint16(2,!0)>>2)})})},n.subscribeToOpticalData=function(e){return n.subscribeTo(h,"data",function(t){var n=4095&t.getUint16(0,!0),a=(61440&t.getUint16(0,!0))>>12;e({lux:n*(.01*(a=0===a?1:2<<a-1))})})},n.subscribeToMovementData=function(e){return n.subscribeTo(T,"data",function(t){return e({gyroX:t.getInt16(0,!0)/131.072,gyroY:t.getInt16(2,!0)/131.072,gyroZ:t.getInt16(4,!0)/131.072,accX:t.getInt16(6,!0)/131.072,accY:t.getInt16(8,!0)/131.072,accZ:t.getInt16(10,!0)/131.072,magX:4912*t.getInt16(12,!0)/32768,magY:4912*t.getInt16(14,!0)/32768,magZ:4912*t.getInt16(16,!0)/32768})})},n.connect=Object(m.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.bluetooth.requestDevice({filters:[{name:"CC2650 SensorTag"}],optionalServices:[v.uuid,g.uuid,p.uuid,h.uuid,T.uuid]});case 2:return t=e.sent,e.next=5,t.gatt.connect();case 5:return n.server=e.sent,e.next=8,n.enableService(p);case 8:return e.next=10,n.enableService(g);case 10:return e.next=12,n.enableService(v);case 12:return e.next=14,n.enableService(h);case 14:return e.next=16,n.enableService(T);case 16:n.setState({connected:!0,server:n.server});case 17:case"end":return e.stop()}},e,this)})),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.Children.map(this.props.children,function(t){return r.a.cloneElement(t,{connect:e.connect,enableService:e.enableService,readCharacteristic:e.readCharacteristic,server:e.state.server,connected:e.state.connected,subscribeToBarometerData:e.subscribeToBarometerData,subscribeToHumidityData:e.subscribeToHumidityData,subscribeToInfaredData:e.subscribeToInfaredData,subscribeToMovementData:e.subscribeToMovementData,subscribeToOpticalData:e.subscribeToOpticalData})})}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={barometer:{temp:0,pressure:0}},n.connect=function(){return n.props.connect().then(function(){n.props.subscribeToBarometerData(function(e){return n.setState({barometer:e})})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.connected?r.a.createElement("div",null,"temp: ",this.state.barometer.temp,r.a.createElement("br",null),"pressure: ",this.state.barometer.pressure):r.a.createElement("button",{onClick:this.connect},"Connect!"))}}]),t}(a.Component),O=(n(20),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null,r.a.createElement(w,null)))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.b019cd37.chunk.js.map